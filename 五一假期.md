

### TCP连接数量

一个电脑能够创建的TCP连接数量限制的顺序：

1. 端口数量的限制：应用程序可以占用的端口号范围在：1024~65000，如果没有可用的端口号，那么会提示错误
2. 文件描述符的限制：没建立一个TCP连接，都需要在机器上创建一个文件描述符提供程序操作网络数据，限制数量可以查看：
   - **系统级**：当前系统可打开的最大数量，通过 `cat /proc/sys/fs/file-max` 查看
   - **用户级**：指定用户可打开的最大数量，通过 `cat /etc/security/limits.conf` 查看
   - **进程级**：单个进程可打开的最大数量，通过` cat /proc/sys/fs/nr_open` 查看

3. 线程占用：对于不使用IO多路复用的模型，其使用一个线程处理一个客户端请求，当请求量很大的时候，将造成大量线程同时运行，系统开销巨大。当然了对于使用了IO多路复用的模型，其使用一个线程处理多个客户端请求，将不会有这个问题
4. 内存占用：连接越多，内存占用越多
5. CPU占用：连接越多，线程切换和执行需要占用大量的CPU时间



















